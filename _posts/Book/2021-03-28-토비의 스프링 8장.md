---
layout: post
title:  "도서 - 토비의 스프링 3.1 Vol 1, 8장"
categories: Book
author : choising
tags: java, book, spring
---

# 토비의 스프링 3.1 Vol 1 (713p ~ 751p)

## 8장 스프링이란 무엇인가?

### 8.1 스프링의 정의

- 자바 엔터프라이즈 개발을 편하게 해주는 오픈소스 경량급 애플리케이션 프레임워크

- 애플리케이션 프레임워크
    - 일반적으로 라이브러리나 프레임워크는 특정 업무 분야나 한 가지 기술에 특화된 목표를 가지고 만들어진다.
    - 스프링은 `애플리케이션 프레임워크` 라는 특징을 갖고 있고, 이는 특정 계층/기술/업무분야에 국한되지 않고 애플리케이션의 전 영역을 포괄하는 범용적인 프레임워크를 말한다.

- 경량급
    - 스프링은 20여 개의 모듈로 세분화되고 수십만 라인에 달하는 코드를 가진 매우 복잡하고 방대한 규모의 프레임워크이다.
    - 그럼에도 스프링이 가볍다고 하는 이유는, 불필요하게 무겁지 않기 때문 (<-> EJB)

- 자바 엔터프라이즈 개발을 편하게
    - 단순히 편리한 몇가지 도구나 기능을 제공하는 차원이 아니라, 근본적인 문제점에 도전해서 해결책을 제시한다는 것이 스프링의 특장점.
    - 편리한 애플리케이션 개발이란 개발자가 복잡하고 실수하기 쉬운 로우레벨 기술에 많은 신경을 쓰지 않으면서도 애플리케이션의 핵심인 사용자의 요구사항, 즉 비즈니스 로직을 빠르고 효과적으로 구현하는 것을 말한다.

- 오픈소스
    - 소스가 모두에게 공개되고, 특별한 라이선스를 취득할 필요가 없이 얼마든지 가져다 자유롭게 이용해도 된다는 뜻
    - 아파치 라이선스 버전 2.0
        - 상업적인 목적의 제품에 포함시키거나 비공개 프로젝트에 자유롭게 이용가능
        - 스프링을 사용한다는 점과 원 저작자를 밝히고, 제품을 패키징 할 때 라이선스 정보를 포함시키는 등 기본적인 의무사항을 따르면 된다.
    - 오픈소스의 장점
        - 개방된 커뮤니티 공간 안에서 투명한 방식으로 다양한 참여를 통해 개발되기 때문에 매우 빠르고 유연한 개발이 가능하다는 것.
        - 잠재적인 버그와 문제점이 빠르게 발견되고 해결될 수 있다.
        - 기업/사용자 입장에서 라이선스 비용에 대한 부담이 없다.
    - 오픈소스의 단점
        - 지속적이고 안정적인 개발이 계속될지 불확실하다.
        - 스프링은 이런 오픈소스의 문제점과 한계를 잘 알기에, 개발을 책임지고 진행할 수 있는 전문기업을 만들었다.



### 8.2 스프링의 목적

- 엔터프라이즈 애플리케이션 개발을 편하게!

#### 8.2.1 엔터프라이즈 개발의 복잡함

- 엔터프라이즈 시스템이란 서버에서 동작하며 기업과 조직의 업무를 처리해주는 시스템

- 첫번째는 기술적인 제약조건과 요구사항이 늘어가기 때문
    - 엔터프라이즈 시스템을 개발하는 데는 순수한 비즈니스 로직을 구현하는 것 외에도 기술적으로 고려할 사항이 많다. (성능, 보안, 안정성, 확장성)
    - 타 시스템 연계, 분산 트랜잭션 등 기술적인 요구는 점차 심화되고 그에 따른 복잡도는 증가하여 개발자 개개인이 져야 할 기술적인 부담은 점점 더 커진다.

- 두번째는 엔터프라이즈 애플리케이션이 구현해야 할 핵심기능인 비즈니스 로직의 복잡함이 증가하기 때문

- 또, 업무 프로세스를 변경하고 조종하는 것을 상시화할 만큼 변화의 속도가 빨라졌다.
    - 기능 요구사항, 업무 정책 등이 바뀌기 때문에 애플리케이션을 자주 수정해야 한다.

- 복잡함을 가증시키는 원인
    - 단지 양이 많고 어렵다는 뜻이 아님.
    - 세부 요소가 이해하기 힘든 방식으로 얽혀있고, 그 때문에 쉽게 다루기 어렵다.
    - 근본적인 비즈니스 로직과 엔터프라이즈 기술이라는 두 가지 복잡함이 한데 얽혀 있기 때문

#### 8.2.2 복잡함을 해결하려는 도전

- 제거될 수 없는 근본적인 복잡함
    - 그 복잡함을 효과적으로 상대할 수 있는 전략과 기법이 필요.

- 실패한 해결책 : EJB
    - 애플리케이션 로직을 담은 핵심코드에서 일부 기술적인 코드가 제거된 것은 사실이지만, 오히려 EJB 환경과 스펙에 종속되는 코드로 만들어져야 하는 부담감이 가증
    - 복잡함을 덜으려다 오히려 더 큰 복잡함을 추가

- 비침투적인 방식을 통한 효과적인 해결책 : 스프링
    - EJB의 실패를 교훈삼아 출발.
    - 기술적인 복잡함을 애플리케이션 핵심 로직의 복잡함에서 제거하는 것을 목표로 둔 것은 동일하나
    - EJB 처럼 개발자의 코드에 난입해서 지저분하고 복잡한 코드를 만들어버리는 실수를 하지 않았다.
    - 어떤 기술을 적용했을 때 그 기술과 관련된 코드나 규약 등이 코드에 등장하는 경우를 침투적인(invasive) 기술이라고 한다.
    - 비침투적인(non-invasive) 기술은 기술의 적용 사실이 코드에 직접 반영되지 않는다. 어딘가에는 기술의 적용에 따라 필요한 작업을 해줘야 하겠지만, 애플리케이션 코드 여기저기에 불쑥 등장하거나, 코드의 설계와 구현 방식을 제한하지 않는다.

#### 8.2.3 복잡함을 상대하는 스프링의 전략

- 기본 전략은 비즈니스 로직을 담은 애플리케이션 코드와 엔터프라이즈 기술을 처리하는 코드를 분리시키는 것.

- 기술적 복잡함을 상대하는 전략
    - 첫번째 문제 : 기술에 대한 접근방식이 일관성 없고, 특정환경에 종속적이다.
        - 공략방법은 추상화
            - 로우레벨 기술 구현 부분과 기술을 사용하는 인터페이스를 분리하고, 환경과 세부 기술에 독립적인 접근 인터페이스를 제공하는 것이 가장 좋은 해결책이다.
    - 두번째 문제 : 기술적인 처리를 담당하는 코드가 성격이 다른 코드에 섞여 등장한다.
        - 공략방법은 AOP

- 비즈니스와 애플리케이션 로직의 복잡함을 상대하는 전략
    - 객체지향 기술

- 핵심도구 : 객체지향과 DI




### 8.3 POJO 프로그래밍

#### 8.3.1 스프링의 핵심: POJO

#### 8.3.2 POJO란 무엇인가?

- 단순한 Java 오브젝트

#### 8.3.3 POJO의 조건

- 특정 규약에 종속되지 않는다.
    - 특정 규약을 따라 비즈니스 컴포넌트를 만들어야 하는 경우 POJO 가 아니다.

- 특정 환경에 종속되지 않는다.
    - 특정 벤더나 서버의 특정 기업의 프레임워크 안에서만 동작 가능한 경우 POJO 가 아니다.
    - 비즈니스 로직을 담은 코드에 `HttpServletRequest` 나 `HttpSession`, 캐시와 같은 API 가 등장하거나 웹 프레임워크의 클래스를 직접 이용하는 부분이 있다면 그것은 진정한 POJO 라고 볼 수 없다.

- 진정한 POJO란 객체지향적인 원리에 충실하면서, 환경과 기술에 종속되지 않고 필요에 따라 재활용될 수 있는 방식으로 설계된 오브젝트

#### 8.3.4 POJO의 장점

- 기술과 환경에 종속되지 않는다.
    - 검증 및 테스트 작성이 수월하다.
    - 자동화된 테스트에 유리하다.

- 객체지향 설계가 자유롭다.

#### 8.3.5 POJO 프레임워크

- 스프링은 POJO를 이용한 엔터프라이즈 애플리케이션 개발을 목적으로 하는 프레임워크

- 스프링은 개발자들이 복잡한 엔터프라이즈 기술보다는 객체지향적인 설계와 개발의 원리에 좀 더 집중할 수 있도록 돕는다.



### 8.4 스프링의 기술

- 스프링에는 POJO 프로그래밍을 손쉽게 할 수 있도록 지원하는 세 가지 가능기술을 제공한다.
    - IoC/DI, AOP, PSA

#### 8.4.1 IoC/DI

- 직접 자신이 사용할 오브젝트를 `new` 키워드로 생성해서 사용하는 강한 결합을 쓰는 방법보다 나은 점은 무엇일까?
    - **유연한 확장이 가능하게 하기 위해서**

- DI의 활용 방법
    - 핵심기능의 변경
    - 핵심기능의 동적인 변경
    - 부가기능의 추가
    - 인터페이스의 변경
    - 프록시
    - 템플릿/콜백
    - 싱클톤과 오브젝트 스코프
    - 테스트

#### 8.4.2 AOP

- AOP와 OOP는 서로 배타적이 아니다.

- AOP의 적용 기법
    - 스프링과 같이 다이내믹 프록시 사용
    - 자바 언어의 한계를 넘어서는 언어의 확장을 이용하는 방법
        - e.g.) AspectJ 사용

- AOP 적용 단계
    - 미리 준비된 AOP 이용
        - e.g.) `@Transactional`
    - 전담팀을 통한 정책 AOP 적용
        - 보안, 로깅, 트레이싱, 성능 모니터링 등
    - AOP의 자유로운 이용

#### 8.4.3 PSA (포터블 서비스 추상화)

- 환경과 세부 기술의 변화에 관계없이 일관된 방식으로 기술에 접근할 수 있게 해주는 PSA

